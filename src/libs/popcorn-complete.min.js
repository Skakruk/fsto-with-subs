(function(t,p){if(!p.addEventListener){t.Popcorn={isSupported:false};var A=("byId forEach extend effects error guid sizeOf isArray nop position disable enable destroyaddTrackEvent removeTrackEvent getTrackEvents getTrackEvent getLastTrackEventId timeUpdate plugin removePlugin compose effect xhr getJSONP getScript").split(/\s+/);
while(A.length){t.Popcorn[A.shift()]=function(){};}return;}var j=Array.prototype,g=Object.prototype,w=j.forEach,r=j.slice,m=g.hasOwnProperty,s=g.toString,d=t.Popcorn,e=[],z=false,v=false,k={events:{hash:{},apis:{}}},h=(function(){return t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||t.oRequestAnimationFrame||t.msRequestAnimationFrame||function(C,B){t.setTimeout(C,16);
};}()),c=function(B){return Object.keys?Object.keys(B):(function(E){var C,D=[];for(C in E){if(m.call(E,C)){D.push(C);}}return D;})(B);},u={put:function(C){for(var B in C){if(C.hasOwnProperty(B)){this[B]=C[B];
}}}},q=function(B,C){return new q.p.init(B,C||null);};q.version="@VERSION";q.isSupported=true;q.instances=[];q.p=q.prototype={init:function(D,E){var G,I,C=this;
if(typeof D==="function"){if(p.readyState==="complete"){D(p,q);return;}e.push(D);if(!z){z=true;var B=function(){v=true;p.removeEventListener("DOMContentLoaded",B,false);
for(var K=0,J=e.length;K<J;K++){e[K].call(p,q);}e=null;};p.addEventListener("DOMContentLoaded",B,false);}return;}if(typeof D==="string"){try{G=p.querySelector(D);
}catch(H){throw new Error("Popcorn.js Error: Invalid media element selector: "+D);}}this.media=G||D;I=(this.media.nodeName&&this.media.nodeName.toLowerCase())||"video";
this[I]=this.media;this.options=q.extend({},E)||{};this.id=this.options.id||q.guid(I);if(q.byId(this.id)){throw new Error("Popcorn.js Error: Cannot use duplicate ID ("+this.id+")");
}this.isDestroyed=false;this.data={running:{cue:[]},timeUpdate:q.nop,disabled:{},events:{},hooks:{},history:[],state:{volume:this.media.volume},trackRefs:{},trackEvents:new f(this)};
q.instances.push(this);var F=function(){if(C.media.currentTime<0){C.media.currentTime=0;}C.media.removeEventListener("loadedmetadata",F,false);var O,K,N,M,L,J;
O=C.media.duration;K=O!=O?Number.MAX_VALUE:O+1;q.addTrackEvent(C,{start:K,end:K});if(!C.isDestroyed){C.data.durationChange=function(){var P=C.media.duration,T=P+1,U=C.data.trackEvents.byStart,R=C.data.trackEvents.byEnd;
U.pop();R.pop();for(var Q=R.length-1;Q>0;Q--){if(R[Q].end>P){C.removeTrackEvent(R[Q]._id);}}for(var S=0;S<U.length;S++){if(U[S].end>P){C.removeTrackEvent(U[S]._id);
}}C.data.trackEvents.byEnd.push({start:T,end:T});C.data.trackEvents.byStart.push({start:T,end:T});};C.media.addEventListener("durationchange",C.data.durationChange,false);
}if(C.options.frameAnimation){C.data.timeUpdate=function(){q.timeUpdate(C,{});q.forEach(q.manifest,function(Q,R){N=C.data.running[R];if(N){L=N.length;for(var P=0;
P<L;P++){M=N[P];J=M._natives;J&&J.frame&&J.frame.call(C,{},M,C.currentTime());}}});C.emit("timeupdate");!C.isDestroyed&&h(C.data.timeUpdate);};!C.isDestroyed&&h(C.data.timeUpdate);
}else{C.data.timeUpdate=function(P){q.timeUpdate(C,P);};if(!C.isDestroyed){C.media.addEventListener("timeupdate",C.data.timeUpdate,false);}}};C.media.addEventListener("error",function(){C.error=C.media.error;
},false);if(C.media.readyState>=1){F();}else{C.media.addEventListener("loadedmetadata",F,false);}return this;}};q.p.init.prototype=q.p;q.byId=function(E){var D=q.instances,C=D.length,B=0;
for(;B<C;B++){if(D[B].id===E){return D[B];}}return null;};q.forEach=function(F,E,D){if(!F||!E){return{};}D=D||this;var C,B;if(w&&F.forEach===w){return F.forEach(E,D);
}if(s.call(F)==="[object NodeList]"){for(C=0,B=F.length;C<B;C++){E.call(D,F[C],C,F);}return F;}for(C in F){if(m.call(F,C)){E.call(D,F[C],C,F);}}return F;
};q.extend=function(C){var B=C,D=r.call(arguments,1);q.forEach(D,function(F){for(var E in F){B[E]=F[E];}});return B;};q.extend(q,{noConflict:function(B){if(B){t.Popcorn=d;
}return q;},error:function(B){throw new Error(B);},guid:function(B){q.guid.counter++;return(B?B:"")+(+new Date()+q.guid.counter);},sizeOf:function(C){var B=0;
for(var D in C){B++;}return B;},isArray:Array.isArray||function(B){return s.call(B)==="[object Array]";},nop:function(){},position:function(H){if(!H.parentNode){return null;
}var C=H.getBoundingClientRect(),B={},N=H.ownerDocument,F=p.documentElement,K=p.body,J,L,E,I,M,G;J=F.clientTop||K.clientTop||0;L=F.clientLeft||K.clientLeft||0;
E=(t.pageYOffset&&F.scrollTop||K.scrollTop);I=(t.pageXOffset&&F.scrollLeft||K.scrollLeft);M=Math.ceil(C.top+E-J);G=Math.ceil(C.left+I-L);for(var D in C){B[D]=Math.round(C[D]);
}return q.extend({},B,{top:M,left:G});},disable:function(B,E){if(B.data.disabled[E]){return;}B.data.disabled[E]=true;if(E in q.registryByName&&B.data.running[E]){for(var C=B.data.running[E].length-1,D;
C>=0;C--){D=B.data.running[E][C];D._natives.end.call(B,null,D);B.emit("trackend",q.extend({},D,{plugin:D.type,type:"trackend"}));}}return B;},enable:function(B,E){if(!B.data.disabled[E]){return;
}B.data.disabled[E]=false;if(E in q.registryByName&&B.data.running[E]){for(var C=B.data.running[E].length-1,D;C>=0;C--){D=B.data.running[E][C];D._natives.start.call(B,null,D);
B.emit("trackstart",q.extend({},D,{plugin:D.type,type:"trackstart",track:D}));}}return B;},destroy:function(B){var D=B.data.events,H=B.data.trackEvents,C,G,E,F;
for(G in D){C=D[G];for(E in C){delete C[E];}D[G]=null;}for(F in q.registryByName){q.removePlugin(B,F);}H.byStart.length=0;H.byEnd.length=0;if(!B.isDestroyed){B.data.timeUpdate&&B.media.removeEventListener("timeupdate",B.data.timeUpdate,false);
B.isDestroyed=true;}q.instances.splice(q.instances.indexOf(B),1);}});q.guid.counter=1;q.extend(q.p,(function(){var B="load play pause currentTime playbackRate volume duration preload playbackRate autoplay loop controls muted buffered readyState seeking paused played seekable ended",C={};
q.forEach(B.split(/\s+/g),function(D){C[D]=function(E){var F;if(typeof this.media[D]==="function"){if(E!=null&&/play|pause/.test(D)){this.media.currentTime=q.util.toSeconds(E);
}this.media[D]();return this;}if(E!=null){F=this.media[D];this.media[D]=E;if(F!==E){this.emit("attrchange",{attribute:D,previousValue:F,currentValue:E});
}return this;}return this.media[D];};});return C;})());q.forEach("enable disable".split(" "),function(B){q.p[B]=function(C){return q[B](this,C);};});q.extend(q.p,{roundTime:function(){return Math.round(this.media.currentTime);
},exec:function(B,E,H){var D=arguments.length,C="trackadded",I,F,J;try{F=q.util.toSeconds(B);}catch(G){}if(typeof F==="number"){B=F;}if(typeof B==="number"&&D===2){H=E;
E=B;B=q.guid("cue");}else{if(D===1){E=-1;}else{I=this.getTrackEvent(B);if(I){this.data.trackEvents.remove(B);y.end(this,I);q.removeTrackEvent.ref(this,B);
C="cuechange";if(typeof B==="string"&&D===2){if(typeof E==="number"){H=I._natives.start;}if(typeof E==="function"){H=E;E=I.start;}}}else{if(D>=2){if(typeof E==="string"){try{F=q.util.toSeconds(E);
}catch(G){}E=F;}if(typeof E==="number"){H=H||q.nop();}if(typeof E==="function"){H=E;E=-1;}}}}}J={id:B,start:E,end:E+1,_running:false,_natives:{start:H||q.nop,end:q.nop,type:"cue"}};
if(I){J=q.extend(I,J);}if(C==="cuechange"){J._id=J.id||J._id||q.guid(J._natives.type);this.data.trackEvents.add(J);y.start(this,J);this.timeUpdate(this,null,true);
q.addTrackEvent.ref(this,J);this.emit(C,q.extend({},J,{id:B,type:C,previousValue:{time:I.start,fn:I._natives.start},currentValue:{time:E,fn:H||q.nop},track:I}));
}else{q.addTrackEvent(this,J);}return this;},mute:function(B){var C=B==null||B===true?"muted":"unmuted";if(C==="unmuted"){this.media.muted=false;this.media.volume=this.data.state.volume;
}if(C==="muted"){this.data.state.volume=this.media.volume;this.media.muted=true;}this.emit(C);return this;},unmute:function(B){return this.mute(B==null?false:!B);
},position:function(){return q.position(this.media);},toggle:function(B){return q[this.data.disabled[B]?"enable":"disable"](this,B);},defaults:function(B,C){if(q.isArray(B)){q.forEach(B,function(E){for(var D in E){this.defaults(D,E[D]);
}},this);return this;}if(!this.options.defaults){this.options.defaults={};}if(!this.options.defaults[B]){this.options.defaults[B]={};}q.extend(this.options.defaults[B],C);
return this;}});q.Events={UIEvents:"blur focus focusin focusout load resize scroll unload",MouseEvents:"mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave click dblclick",Events:"loadstart progress suspend emptied stalled play pause error loadedmetadata loadeddata waiting playing canplay canplaythrough seeking seeked timeupdate ended ratechange durationchange volumechange"};
q.Events.Natives=q.Events.UIEvents+" "+q.Events.MouseEvents+" "+q.Events.Events;k.events.apiTypes=["UIEvents","MouseEvents","Events"];(function(E,F){var D=k.events.apiTypes,G=E.Natives.split(/\s+/g),C=0,B=G.length,H;
for(;C<B;C++){F.hash[G[C]]=true;}D.forEach(function(M,J){F.apis[M]={};var L=E[M].split(/\s+/g),I=L.length,K=0;for(;K<I;K++){F.apis[M][L[K]]=true;}});})(q.Events,k.events);
q.events={isNative:function(B){return !!k.events.hash[B];},getInterface:function(H){if(!q.events.isNative(H)){return false;}var F=k.events,E=F.apiTypes,I=F.apis,C=0,B=E.length,G,D;
for(;C<B;C++){D=E[C];if(I[D][H]){G=D;break;}}return G;},all:q.Events.Natives.split(/\s+/g),fn:{trigger:function(D,F){var G,B,E,C=this.data.events[D];if(C){G=q.events.getInterface(D);
if(G){B=p.createEvent(G);B.initEvent(D,true,true,t,1);this.media.dispatchEvent(B);return this;}E=C.slice();while(E.length){E.shift().call(this,F);}}return this;
},listen:function(F,G){var I=this,J=true,C=q.events.hooks[F],D=F,H,E;if(typeof G!=="function"){throw new Error("Popcorn.js Error: Listener is not a function");
}if(!this.data.events[F]){this.data.events[F]=[];J=false;}if(C){if(C.add){C.add.call(this,{},G);}if(C.bind){F=C.bind;}if(C.handler){E=G;G=function B(K){C.handler.call(I,K,E);
};}J=true;if(!this.data.events[F]){this.data.events[F]=[];J=false;}}this.data.events[F].push(G);if(!J&&q.events.all.indexOf(F)>-1){this.media.addEventListener(F,function(K){if(I.data.events[F]){H=I.data.events[F].slice();
while(H.length){H.shift().call(I,K);}}},false);}return this;},unlisten:function(E,D){var F,C=this.data.events[E];if(!C){return;}if(typeof D==="string"){for(var B=0;
B<C.length;B++){if(C[B].name===D){C.splice(B--,1);}}return this;}else{if(typeof D==="function"){while(F!==-1){F=C.indexOf(D);if(F!==-1){C.splice(F,1);}}return this;
}}this.data.events[E]=null;return this;}},hooks:{canplayall:{bind:"canplaythrough",add:function(B,D){var C=false;if(this.media.readyState){setTimeout(function(){D.call(this,B);
}.bind(this),0);C=true;}this.data.hooks.canplayall={fired:C};},handler:function b(B,C){if(!this.data.hooks.canplayall.fired){C.call(this,B);this.data.hooks.canplayall.fired=true;
}}}}};q.forEach([["trigger","emit"],["listen","on"],["unlisten","off"]],function(B){q.p[B[0]]=q.p[B[1]]=q.events.fn[B[0]];});function y(B){u.put.call(this,B);
}y.start=function(B,C){if(C.end>B.media.currentTime&&C.start<=B.media.currentTime&&!C._running){C._running=true;B.data.running[C._natives.type].push(C);
if(!B.data.disabled[C._natives.type]){C._natives.start.call(B,null,C);B.emit("trackstart",q.extend({},C,{plugin:C._natives.type,type:"trackstart",track:C}));
}}};y.end=function(B,C){var D;if((C.end<=B.media.currentTime||C.start>B.media.currentTime)&&C._running){D=B.data.running[C._natives.type];C._running=false;
D.splice(D.indexOf(C),1);if(!B.data.disabled[C._natives.type]){C._natives.end.call(B,null,C);B.emit("trackend",q.extend({},C,{plugin:C._natives.type,type:"trackend",track:C}));
}}};function f(B){this.parent=B;this.byStart=[{start:-1,end:-1}];this.byEnd=[{start:-1,end:-1}];this.animating=[];this.startIndex=0;this.endIndex=0;this.previousUpdateTime=-1;
this.count=1;}function l(D,B,C){return D[B]&&D[B]===C;}f.prototype.where=function(B){return(this.parent.getTrackEvents()||[]).filter(function(D){var C,E;
if(!B){return true;}for(C in B){E=B[C];if(l(D,C,E)||l(D._natives,C,E)){return true;}}return false;});};f.prototype.add=function(B){var F=this.byStart,C=this.byEnd,E,D;
if(B&&B._id){this.parent.data.history.push(B._id);}B.start=q.util.toSeconds(B.start,this.parent.options.framerate);B.end=q.util.toSeconds(B.end,this.parent.options.framerate);
for(E=F.length-1;E>=0;E--){if(B.start>=F[E].start){F.splice(E+1,0,B);break;}}for(D=C.length-1;D>=0;D--){if(B.end>C[D].end){C.splice(D+1,0,B);break;}}if(E<=this.parent.data.trackEvents.startIndex&&B.start<=this.parent.data.trackEvents.previousUpdateTime){this.parent.data.trackEvents.startIndex++;
}if(D<=this.parent.data.trackEvents.endIndex&&B.end<this.parent.data.trackEvents.previousUpdateTime){this.parent.data.trackEvents.endIndex++;}this.count++;
};f.prototype.remove=function(K,B){if(K instanceof y){K=K.id;}if(typeof K==="object"){this.where(K).forEach(function(R){this.removeTrackEvent(R._id);},this.parent);
return this;}var C,I,D,L,F,E=this.byStart.length,M=0,P=0,H=[],G=[],Q=[],N=[],O={};B=B||{};while(--E>-1){C=this.byStart[M];I=this.byEnd[M];if(!C._id){H.push(C);
G.push(I);}if(C._id){if(C._id!==K){H.push(C);}if(I._id!==K){G.push(I);}if(C._id===K){P=M;F=C;}}M++;}E=this.animating.length;M=0;if(E){while(--E>-1){D=this.animating[M];
if(!D._id){Q.push(D);}if(D._id&&D._id!==K){Q.push(D);}M++;}}if(P<=this.startIndex){this.startIndex--;}if(P<=this.endIndex){this.endIndex--;}this.byStart=H;
this.byEnd=G;this.animating=Q;this.count--;L=this.parent.data.history.length;for(var J=0;J<L;J++){if(this.parent.data.history[J]!==K){N.push(this.parent.data.history[J]);
}}this.parent.data.history=N;};function x(C,D){var B={};for(var E in C){if(m.call(D,E)&&m.call(C,E)){B[E]=C[E];}}return B;}q.addTrackEvent=function(D,B){var C;
if(B instanceof y){return;}B=new y(B);if(B&&B._natives&&B._natives.type&&(D.options.defaults&&D.options.defaults[B._natives.type])){C=q.extend({},B);q.extend(B,D.options.defaults[B._natives.type],C);
}if(B._natives){B._id=B.id||B._id||q.guid(B._natives.type);if(B._natives._setup){B._natives._setup.call(D,B);D.emit("tracksetup",q.extend({},B,{plugin:B._natives.type,type:"tracksetup",track:B}));
}}D.data.trackEvents.add(B);y.start(D,B);this.timeUpdate(D,null,true);if(B._id){q.addTrackEvent.ref(D,B);}D.emit("trackadded",q.extend({},B,B._natives?{plugin:B._natives.type}:{},{type:"trackadded",track:B}));
};q.addTrackEvent.ref=function(C,B){C.data.trackRefs[B._id]=B;return C;};q.removeTrackEvent=function(D,B){var C=D.getTrackEvent(B);if(!C){return;}if(C._natives._teardown){C._natives._teardown.call(D,C);
}D.data.trackEvents.remove(B);q.removeTrackEvent.ref(D,B);if(C._natives){D.emit("trackremoved",q.extend({},C,{plugin:C._natives.type,type:"trackremoved",track:C}));
}};q.removeTrackEvent.ref=function(C,B){delete C.data.trackRefs[B];return C;};q.getTrackEvents=function(F){var G=[],C=F.data.trackEvents.byStart,E=C.length,B=0,D;
for(;B<E;B++){D=C[B];if(D._id){G.push(D);}}return G;};q.getTrackEvents.ref=function(B){return B.data.trackRefs;};q.getTrackEvent=function(C,B){return C.data.trackRefs[B];
};q.getTrackEvent.ref=function(C,B){return C.data.trackRefs[B];};q.getLastTrackEventId=function(B){return B.data.history[B.data.history.length-1];};q.timeUpdate=function(H,L){var P=H.media.currentTime,F=H.data.trackEvents.previousUpdateTime,N=H.data.trackEvents,D=N.endIndex,E=N.startIndex,O=N.byStart.length,M=N.byEnd.length,G=q.registryByName,K="trackstart",B="trackend",S,I,Q,J,C,R;
if(F<=P){while(N.byEnd[D]&&N.byEnd[D].end<=P){S=N.byEnd[D];J=S._natives;C=J&&J.type;if(!J||(!!G[C]||!!H[C])){if(S._running===true){S._running=false;R=H.data.running[C];
R.splice(R.indexOf(S),1);if(!H.data.disabled[C]){J.end.call(H,L,S);H.emit(B,q.extend({},S,{plugin:C,type:B,track:S}));}}D++;}else{q.removeTrackEvent(H,S._id);
return;}}while(N.byStart[E]&&N.byStart[E].start<=P){I=N.byStart[E];J=I._natives;C=J&&J.type;if(!J||(!!G[C]||!!H[C])){if(I.end>P&&I._running===false){I._running=true;
H.data.running[C].push(I);if(!H.data.disabled[C]){J.start.call(H,L,I);H.emit(K,q.extend({},I,{plugin:C,type:K,track:I}));}}E++;}else{q.removeTrackEvent(H,I._id);
return;}}}else{if(F>P){while(N.byStart[E]&&N.byStart[E].start>P){I=N.byStart[E];J=I._natives;C=J&&J.type;if(!J||(!!G[C]||!!H[C])){if(I._running===true){I._running=false;
R=H.data.running[C];R.splice(R.indexOf(I),1);if(!H.data.disabled[C]){J.end.call(H,L,I);H.emit(B,q.extend({},I,{plugin:C,type:B,track:I}));}}E--;}else{q.removeTrackEvent(H,I._id);
return;}}while(N.byEnd[D]&&N.byEnd[D].end>P){S=N.byEnd[D];J=S._natives;C=J&&J.type;if(!J||(!!G[C]||!!H[C])){if(S.start<=P&&S._running===false){S._running=true;
H.data.running[C].push(S);if(!H.data.disabled[C]){J.start.call(H,L,S);H.emit(K,q.extend({},S,{plugin:C,type:K,track:S}));}}D--;}else{q.removeTrackEvent(H,S._id);
return;}}}}N.endIndex=D;N.startIndex=E;N.previousUpdateTime=P;N.byStart.length<O&&N.startIndex--;N.byEnd.length<M&&N.endIndex--;};q.extend(q.p,{getTrackEvents:function(){return q.getTrackEvents.call(null,this);
},getTrackEvent:function(B){return q.getTrackEvent.call(null,this,B);},getLastTrackEventId:function(){return q.getLastTrackEventId.call(null,this);},removeTrackEvent:function(B){q.removeTrackEvent.call(null,this,B);
return this;},removePlugin:function(B){q.removePlugin.call(null,this,B);return this;},timeUpdate:function(B){q.timeUpdate.call(null,this,B);return this;
},destroy:function(){q.destroy.call(null,this);return this;}});q.manifest={};q.registry=[];q.registryByName={};q.plugin=function(C,E,B){if(q.protect.natives.indexOf(C.toLowerCase())>=0){q.error("'"+C+"' is a protected function name");
return;}var I=typeof E==="function",F=["start","end","type","manifest"],G=["_setup","_teardown","start","end","frame"],J={},H;var D=function(N,M){N=N||q.nop;
M=M||q.nop;return function(){N.apply(this,arguments);M.apply(this,arguments);};};q.manifest[C]=B=B||E.manifest||{};G.forEach(function(M){E[M]=o(E[M]||q.nop,C);
});var L=function(M,O){if(!O){return this;}if(O.ranges&&q.isArray(O.ranges)){q.forEach(O.ranges,function(S){var T=q.extend({},O,S);delete T.ranges;this[C](T);
},this);return this;}var N=O._natives={},R="",P,Q;q.extend(N,M);O._natives.type=O._natives.plugin=C;O._running=false;N.start=N.start||N["in"];N.end=N.end||N.out;
if(O.once){N.end=D(N.end,function(){this.removeTrackEvent(O._id);});}N._teardown=D(function(){var S=r.call(arguments),T=this.data.running[N.type];S.unshift(null);
S[1]._running&&T.splice(T.indexOf(O),1)&&N.end.apply(this,S);S[1]._running=false;this.emit("trackend",q.extend({},O,{plugin:N.type,type:"trackend",track:q.getTrackEvent(this,O.id||O._id)}));
},N._teardown);N._teardown=D(N._teardown,function(){this.emit("trackteardown",q.extend({},O,{plugin:C,type:"trackteardown",track:q.getTrackEvent(this,O.id||O._id)}));
});O.compose=O.compose||[];if(typeof O.compose==="string"){O.compose=O.compose.split(" ");}O.effect=O.effect||[];if(typeof O.effect==="string"){O.effect=O.effect.split(" ");
}O.compose=O.compose.concat(O.effect);O.compose.forEach(function(S){R=q.compositions[S]||{};G.forEach(function(T){N[T]=D(N[T],R[T]);});});O._natives.manifest=B;
if(!("start" in O)){O.start=O["in"]||0;}if(!O.end&&O.end!==0){O.end=O.out||Number.MAX_VALUE;}if(!m.call(O,"toString")){O.toString=function(){var S=["start: "+O.start,"end: "+O.end,"id: "+(O.id||O._id)];
if(O.target!=null){S.push("target: "+O.target);}return C+" ( "+S.join(", ")+" )";};}if(!O.target){Q="options" in B&&B.options;O.target=Q&&"target" in Q&&Q.target;
}if(!O._id&&O._natives){O._id=q.guid(O._natives.type);}if(O instanceof y){if(O._natives){O._id=O.id||O._id||q.guid(O._natives.type);if(O._natives._setup){O._natives._setup.call(this,O);
this.emit("tracksetup",q.extend({},O,{plugin:O._natives.type,type:"tracksetup",track:O}));}}this.data.trackEvents.add(O);y.start(this,O);this.timeUpdate(this,null,true);
if(O._id){q.addTrackEvent.ref(this,O);}}else{q.addTrackEvent(this,O);}q.forEach(M,function(T,S){if(F.indexOf(S)===-1){this.on(S,T);}},this);return this;
};q.p[C]=J[C]=function(T,O){var R=arguments.length,N,S,Q,M,P;if(T&&!O){O=T;T=null;}else{N=this.getTrackEvent(T);if(!N){O.id=T;}else{P=O;M=x(N,P);if(N._natives._update){this.data.trackEvents.remove(N);
if(m.call(O,"start")){N.start=O.start;}if(m.call(O,"end")){N.end=O.end;}y.end(this,N);if(I){E.call(this,N);}N._natives._update.call(this,N,O);this.data.trackEvents.add(N);
y.start(this,N);}else{q.extend(N,O);this.data.trackEvents.remove(T);if(N._natives._teardown){N._natives._teardown.call(this,N);}q.removeTrackEvent.ref(this,T);
if(I){L.call(this,E.call(this,N),N);}else{N._id=N.id||N._id||q.guid(N._natives.type);if(N._natives&&N._natives._setup){N._natives._setup.call(this,N);this.emit("tracksetup",q.extend({},N,{plugin:N._natives.type,type:"tracksetup",track:N}));
}this.data.trackEvents.add(N);y.start(this,N);this.timeUpdate(this,null,true);q.addTrackEvent.ref(this,N);}this.emit("trackchange",{id:N.id,type:"trackchange",previousValue:M,currentValue:N,track:N});
return this;}if(N._natives.type!=="cue"){this.emit("trackchange",{id:N.id,type:"trackchange",previousValue:M,currentValue:P,track:N});}return this;}}this.data.running[C]=this.data.running[C]||[];
S=(this.options.defaults&&this.options.defaults[C])||{};Q=q.extend({},S,O);L.call(this,I?E.call(this,Q):E,Q);return this;};if(B){q.extend(E,{manifest:B});
}var K={fn:J[C],definition:E,base:E,parents:[],name:C};q.registry.push(q.extend(J,K,{type:C}));q.registryByName[C]=K;return J;};q.plugin.errors=[];function o(B,C){return function(){if(q.plugin.debug){return B.apply(this,arguments);
}try{return B.apply(this,arguments);}catch(D){q.plugin.errors.push({plugin:C,thrown:D,source:B.toString()});this.emit("pluginerror",q.plugin.errors);}};
}q.plugin.debug=(q.version==="@VERSION");q.removePlugin=function(F,B){if(!B){B=F;F=q.p;if(q.protect.natives.indexOf(B.toLowerCase())>=0){q.error("'"+B+"' is a protected function name");
return;}var G=q.registry.length,I;for(I=0;I<G;I++){if(q.registry[I].name===B){q.registry.splice(I,1);delete q.registryByName[B];delete q.manifest[B];delete F[B];
return;}}}var D=F.data.trackEvents.byStart,E=F.data.trackEvents.byEnd,J=F.data.trackEvents.animating,H,C;for(H=0,C=D.length;H<C;H++){if(D[H]&&D[H]._natives&&D[H]._natives.type===B){D[H]._natives._teardown&&D[H]._natives._teardown.call(F,D[H]);
D.splice(H,1);H--;C--;if(F.data.trackEvents.startIndex<=H){F.data.trackEvents.startIndex--;F.data.trackEvents.endIndex--;}}if(E[H]&&E[H]._natives&&E[H]._natives.type===B){E.splice(H,1);
}}for(H=0,C=J.length;H<C;H++){if(J[H]&&J[H]._natives&&J[H]._natives.type===B){J.splice(H,1);H--;C--;}}};q.compositions={};q.compose=function(B,C,D){q.manifest[B]=D=D||C.manifest||{};
q.compositions[B]=C;};q.plugin.effect=q.effect=q.compose;var i=/^(?:\.|#|\[)/;q.dom={debug:false,find:function(B,C){var D=null;C=C||p;if(B){if(!i.test(B)){D=p.getElementById(B);
if(D!==null){return D;}}try{D=C.querySelector(B);}catch(E){if(q.dom.debug){throw new Error(E);}}}return D;}};var a=/\?/,n={ajax:null,url:"",data:"",dataType:"",success:q.nop,type:"GET",async:true,contentType:"application/x-www-form-urlencoded; charset=UTF-8"};
q.xhr=function(B){var C;B.dataType=B.dataType&&B.dataType.toLowerCase()||null;if(B.dataType&&(B.dataType==="jsonp"||B.dataType==="script")){q.xhr.getJSONP(B.url,B.success,B.dataType==="script");
return;}C=q.extend({},n,B);C.ajax=new XMLHttpRequest();if(C.ajax){if(C.type==="GET"&&C.data){C.url+=(a.test(C.url)?"&":"?")+C.data;C.data=null;}C.ajax.open(C.type,C.url,C.async);
if(C.type==="POST"){C.ajax.setRequestHeader("Content-Type",C.contentType);}C.ajax.send(C.data||null);return q.xhr.httpData(C);}};q.xhr.httpData=function(D){var E,C=null,F,B=null;
D.ajax.onreadystatechange=function(){if(D.ajax.readyState===4){try{C=JSON.parse(D.ajax.responseText);}catch(G){}E={xml:D.ajax.responseXML,text:D.ajax.responseText,json:C};
if(!E.xml||!E.xml.documentElement){E.xml=null;try{F=new DOMParser();B=F.parseFromString(D.ajax.responseText,"text/xml");if(!B.getElementsByTagName("parsererror").length){E.xml=B;
}}catch(G){}}if(D.dataType){E=E[D.dataType];}D.success.call(D.ajax,E);}};return E;};q.xhr.getJSONP=function(B,M,D){var J=p.head||p.getElementsByTagName("head")[0]||p.documentElement,K=p.createElement("script"),N=false,E=[],I=/(=)\?(?=&|$)|\?\?/,H,G,C,L,F;
if(!D){F=B.match(/(callback=[^&]*)/);if(F!==null&&F.length){G=F[1].split("=")[1];if(G==="?"){G="jsonp";}L=q.guid(G);B=B.replace(/(callback=[^&]*)/,"callback="+L);
}else{L=q.guid("jsonp");if(I.test(B)){B=B.replace(I,"$1"+L);}E=B.split(/\?(.+)?/);B=E[0]+"?";if(E[1]){B+=E[1]+"&";}B+="callback="+L;}window[L]=function(O){M&&M(O);
N=true;};}K.addEventListener("load",function(){if(D){M&&M();}if(N){delete window[L];}J.removeChild(K);},false);K.addEventListener("error",function(O){M&&M({error:O});
if(!D){delete window[L];}J.removeChild(K);},false);K.src=B;J.insertBefore(K,J.firstChild);return;};q.getJSONP=q.xhr.getJSONP;q.getScript=q.xhr.getScript=function(B,C){return q.xhr.getJSONP(B,C,true);
};q.util={toSeconds:function(B,I){var K=/^([0-9]+:){0,2}[0-9]+([.;][0-9]+)?$/,G="Invalid time format",J,E,D,C,F,H;if(typeof B==="number"){return B;}if(typeof B==="string"&&!K.test(B)){q.error(G);
}J=B.split(":");E=J.length-1;D=J[E];if(D.indexOf(";")>-1){F=D.split(";");H=0;if(I&&(typeof I==="number")){H=parseFloat(F[1],10)/I;}J[E]=parseInt(F[0],10)+H;
}C=J[0];return{1:parseFloat(C,10),2:(parseInt(C,10)*60)+parseFloat(J[1],10),3:(parseInt(C,10)*3600)+(parseInt(J[1],10)*60)+parseFloat(J[2],10)}[J.length||1];
}};q.p.cue=q.p.exec;q.protect={natives:c(q.p).map(function(B){return B.toLowerCase();})};q.forEach({listen:"on",unlisten:"off",trigger:"emit",exec:"cue"},function(D,C){var B=q.p[C];
q.p[C]=function(){if(typeof console!=="undefined"&&console.warn){console.warn("Deprecated method '"+C+"', "+(D==null?"do not use.":"use '"+D+"' instead."));
q.p[C]=B;}return q.p[D].apply(this,[].slice.call(arguments));};});t.Popcorn=q;})(window,window.document);(function(a){var b=0,c=function(e,i){var d=e.container=document.createElement("div"),f=d.style,h=e.media;
var g=function(){var j=e.position();if(!document.webkitFullscreenElement){}else{}setTimeout(g,200);};d.id=i||"subs_holder";if(document.webkitFullscreenElement){}else{f.position="absolute";
f.color="white";f.textShadow="black 2px 2px 6px";f.fontWeight="bold";f.textAlign="center";f.fontSize="18px";}g();e.media.parentNode.appendChild(d);return d;
};a.plugin("subtitle",{manifest:{about:{name:"Popcorn Subtitle Plugin",version:"0.1",author:"Scott Downe",website:"http://scottdowne.wordpress.com/"},options:{start:{elem:"input",type:"text",label:"Start"},end:{elem:"input",type:"text",label:"End"},target:"subtitle-container",text:{elem:"input",type:"text",label:"Text"}}},_setup:function(d){var e=document.createElement("div");
e.id="subtitle-"+b++;e.style.display="none";(!this.container&&(!d.target||d.target==="subtitle-container"))&&c(this);if(d.target&&d.target!=="subtitle-container"){d.container=document.getElementById(d.target)||c(this,d.target);
}else{d.container=this.container;}document.getElementById(d.container.id)&&document.getElementById(d.container.id).appendChild(e);d.innerContainer=e;d.showSubtitle=function(){d.innerContainer.innerHTML=d.text||"";
};},start:function(e,d){d.innerContainer.style.display="inline";d.showSubtitle(d,d.text);},end:function(e,d){d.innerContainer.style.display="none";d.innerContainer.innerHTML="";
},_teardown:function(d){d.container.removeChild(d.innerContainer);}});})(Popcorn);